# 提供されたコードの検証レポート

## 概要

ユーザーが提供したReactコードの算命学計算ロジックを、朱学院の検証データと比較検証しました。

## コードの特徴

1. **シンプルでエレガント**: 五行相生相克の理論に基づいた十大主星計算
2. **二十八元表**: `ZOKAN_TABLE`で日数に基づいて蔵干を動的に選択
3. **陰陽の区別**: 同性・異性で星名を使い分ける

## 検証結果

### 1983-08-11（日干「辛」）

| 部位 | 提供コード | 朱学院 | 一致 |
|------|-----------|--------|------|
| 頭 | 鳳閣星 | 鳳閣星 | ✓ |
| 胸 | 牽牛星 | 玉堂星 | ✗ |
| 腹 | 石門星 | 石門星 | ✓ |
| 右手 | 調舒星 | 車輢星 | ✗ |
| 左手 | 龍高星 | 石門星 | ✗ |

### 涼子（1977-08-20、日干「己」）

| 部位 | 提供コード | 朱学院 | 一致 |
|------|-----------|--------|------|
| 頭 | 龍高星 | 龍高星 | ✓ |
| 胸 | 玉堂星 | 司禄星 | ✗ |
| 腹 | 石門星 | 石門星 | ✓ |
| 右手 | 鳳閣星 | 鳳閣星 | ✓ |
| 左手 | 石門星 | 調舒星 | ✗ |

## 一致率

- **頭**: 2/2 = 100% ✓
- **腹**: 2/2 = 100% ✓
- **右手**: 1/2 = 50%
- **胸**: 0/2 = 0%
- **左手**: 0/2 = 0%

**全体**: 5/10 = 50%

## 課題

### 1. 節入り日数計算の実装不完全

現在のコードでは `daysFromSetsuiri = 5` という固定値を使用していますが、これは正確な蔵干を取得できていない原因です。

提供されたコードには節入り計算のロジックが含まれていますが、検証スクリプトでは正しく実装されていませんでした。

### 2. 胸（月支蔵干）の不一致

1983-08-11:
- 私たちの計算: 月支=申 → 蔵干=壬 → 辛×壬 = 牽牛星
- 朱学院: 玉堂星

「玉堂星」になるには：
- 辛×戊 = 玉堂星
- したがって、申の蔵干が「戊」である必要

しかし、二十八元では申の本気は「庚」です。これは別のルールが存在する可能性を示しています。

### 3. 左手（年支蔵干）の不一致

1983-08-11:
- 私たちの計算: 年支=亥 → 蔵干=戊 → 辛×戊 = 玉堂星
- 朱学院: 石門星

「石門星」になるには：
- 辛×甲 = 石門星
- したがって、亥の蔵干が「甲」である必要

二十八元では、亥の初気が「甲」ですが、`daysFromSetsuiri`が5なので「戊」になっています。

## 結論

提供されたコードは構造的に正しく、二十八元によるアプローチは理にかなっています。課題は：

1. **節入りからの経過日数を正確に計算する**
2. **特定のケースで異なる蔵干を選択するルールが存在する可能性**

涼子の右手が正解したことは、日支蔵干を使用するアプローチが正しいことを証明しています。

## 推奨事項

提供されたコードの二十八元アプローチをaccurate-logicに統合しつつ、以下の改善を行います：

1. 節入り日数計算を正確に実装
2. 二十八元の`ZOKAN_TABLE`をaccurate-logicの`TWENTY_EIGHT_ELEMENTS`と統合
3. 蔵干選択のルールを追加検証
