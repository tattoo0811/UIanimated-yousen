/**
 * 日支・年支の蔵干計算の確認
 * 節入りではなく、月数（生肖月）に基づいて蔵干を決定
 */

// 月数（生肖月）に基づく蔵干テーブル
// 各地支について、1月から12月までの蔵干
const BRANCH_HIDDEN_STEM_TABLE = {
  '子': ['甲', '癸', '壬', '癸', '壬', '癸', '壬', '癸', '壬', '癸', '壬', '癸'], // 1月-12月
  '丑': ['己', '癸', '壬', '辛', '壬', '己', '壬', '己', '己', '己', '壬', '壬'],
  '寅': ['戊', '丙', '甲', '戊', '丙', '甲', '戊', '丙', '甲', '戊', '丙', '甲'],
  '卯': ['乙', '乙', '乙', '乙', '乙', '乙', '乙', '乙', '乙', '乙', '乙', '乙'],
  '辰': ['乙', '癸', '戊', '乙', '癸', '戊', '乙', '癸', '戊', '乙', '癸', '戊'],
  '巳': ['戊', '庚', '丙', '戊', '庚', '丙', '戊', '庚', '丙', '戊', '庚', '丙'],
  '午': ['己', '己', '丁', '己', '己', '丁', '己', '己', '丁', '己', '己', '丁'],
  '未': ['丁', '丁', '丁', '丁', '丁', '丁', '丁', '丁', '丁', '丁', '丁', '丁'],
  '申': ['戊', '丙', '壬', '戊', '丙', '壬', '戊', '丙', '壬', '戊', '丙', '壬'],
  '酉': ['辛', '辛', '辛', '辛', '辛', '辛', '辛', '辛', '辛', '辛', '辛', '辛'],
  '戌': ['辛', '丁', '戊', '辛', '丁', '戊', '辛', '丁', '戊', '辛', '丁', '戊'],
  '亥': ['甲', '甲', '壬', '甲', '甲', '壬', '甲', '甲', '壬', '甲', '甲', '壬'],
};

function getBranchHiddenStemByMonth(branchStr, date) {
  const month = date.getMonth() + 1;
  const stems = BRANCH_HIDDEN_STEM_TABLE[branchStr];
  return stems ? stems[month - 1] : null;
}

// テスト
console.log('=== 日支・年支の蔵干計算テスト ===\n');

// 1983-08-11: 日支=亥
const date1 = new Date(1983, 7, 11, 12, 0, 0);
const hiddenStem1 = getBranchHiddenStemByMonth('亥', date1);
console.log('1983-08-11:');
console.log('  日支: 亥');
console.log('  月: 8');
console.log('  亥の蔵干（8月）:', hiddenStem1);
console.log('  → 癸×' + hiddenStem1 + ' = ?');

// 1984-12-02: 年支=子
const date2 = new Date(1984, 11, 2, 12, 0, 0);
const hiddenStem2 = getBranchHiddenStemByMonth('子', date2);
console.log('\n1984-12-02:');
console.log('  年支: 子');
console.log('  月: 12');
console.log('  子の蔵干（12月）:', hiddenStem2);
console.log('  → 甲×' + hiddenStem2 + ' = ?');
