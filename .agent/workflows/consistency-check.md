---
description: 全キャラクター設定の矛盾を自動検出する巡回エージェント
---

# 設定矛盾チェッカー

## 概要

小説「九条巡の運命診断室」の全キャラクター設定を巡回し、算命学データの誤りや設定間の矛盾を検出する。

## 実行手順

### ステップ1: CLI一括検証

全キャラクターの生年月日をCLIで検証する:

// turbo
```bash
# EP1-10のキャラクターを一括検証
for date in "1999-05-03" "1980-05-06" "1983-01-12" "2010-06-23" "1994-02-11" "1988-01-18" "1992-02-08" "1997-02-22" "1985-09-24" "2000-08-07" "1976-02-16"; do
  echo "=== $date ==="
  bun run tools/rev-sanmei-cli-v6.ts $date 2>/dev/null | head -20
  echo ""
done
```

### ステップ2: ソースデータとの照合

以下のファイルを順に読み、CLI結果と比較:

1. `novel/characters/ep1-10.md`
2. `novel/characters/ep11-20.md`
3. `novel/characters/ep21-30.md`

**チェック項目**:
- [ ] 命式（年柱/月柱/日柱）の一致
- [ ] 十大主星（5星）の一致
- [ ] 十二大従星（3星 + エネルギー値）の一致
- [ ] 天中殺の一致
- [ ] 生年月日と年齢の整合性（2026年4月時点）

### ステップ3: キャラクター間の整合性

- [ ] 同じ日柱のキャラクターが同じ天中殺を持っているか
- [ ] 家族関係にあるキャラクターの年齢が矛盾していないか
- [ ] 年表の出来事が他キャラクターの年表と矛盾していないか
- [ ] 物語内のエピソード番号が正しいか

### ステップ4: personas/ との照合

`novel/characters/personas/` にidentity.md/soul.mdが存在するキャラクターについて:

- [ ] identity.mdの算命学データがCLI結果と一致するか
- [ ] soul.mdの天中殺記述がidentity.mdと一致するか
- [ ] 話し方の例文がidentity.mdの性格特性と矛盾していないか

### ステップ5: レポート生成

発見した矛盾を以下の形式でレポート:

```markdown
## 矛盾レポート — {日付}

### 🔴 重大（算命学データの誤り）
- {キャラ名}: {ファイル名}の{項目}が「{現在の値}」だが、CLI検証では「{正しい値}」

### 🟡 注意（設定の不整合）
- {キャラ名}: {ファイル1}では{事実A}だが、{ファイル2}では{事実B}

### 🟢 確認済み
- {キャラ名}: 全データ一致
```

## 対象ファイル

- `novel/characters/ep1-10.md`
- `novel/characters/ep11-20.md`
- `novel/characters/ep21-30.md`
- `novel/characters/personas/*/identity.md`
- `novel/characters/personas/*/soul.md`
- `src/data/ep1-120-characters.ts`（ダッシュボードデータ）
