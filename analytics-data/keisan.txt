
高精度陰陽五行診断システム仕様書：天文学的計算ロジックと哲学的真髄の統合


1. 序論：次世代型運命解析システムの設計思想

本報告書は、既存の簡易的な占いアプリとは一線を画す、学術的精度と深遠な東洋哲学を融合させた「陰陽五行診断システム」の構築に向けた包括的な技術仕様書である。市場に流通する多くのアプリケーションは、グレゴリオ暦に基づく静的なテーブル変換や、平均太陽時を用いた概算に依存しており、その結果として「節入り（せついり）」や「時柱（じちゅう）」の判定において致命的な誤差を含んでいる。
本システムが目指すのは、ウェブ上の天文学的知見に基づく「真正太陽時（True Solar Time）」および「惑星位置計算（VSOP87等）」による厳密な時間座標の特定と、独自のリサーチ資料（「陰陽五行論.xlsx」や「陰陽五行の真髄」関連文書）に基づく深層心理・運命解析ロジックの完全な統合である。これにより、利用者の「宿命（Fate）」と「環境（Environment）」を数理的に解き明かし、最適な「生き方（Lifestyle）」を提案するアルゴリズムを確立する。
本報告書では、システムの根幹を成す「天文学的カーネル（計算層）」と、診断の質を決定づける「形而上学的ドメインモデル（解釈層）」の二層構造について、その論理的整合性と実装要件を詳述する。

2. 天文学的カーネル：高精度時空間計算ロジック

陰陽五行診断の正確性は、利用者の出生時間をいかに正確に「干支（GanZhi）」という60進法の循環座標に変換するかにかかっている。ここでは、一般的な平均太陽時ではなく、天文学的な厳密性を追求した計算アルゴリズムを定義する。

2.1. ユリウス日（Julian Day Number）の厳密計算

すべての計算の基礎となるのが、紀元前4713年1月1日正午を起点とする連続した日数のカウント、すなわちユリウス日（JD）である。グレゴリオ暦は不連続な暦法であり、干支のような連続サイクルの計算には不向きであるため、内部処理は全てJDにて行うことが推奨される1。

2.1.1. 暦法の変換アルゴリズム

入力された生年月日（$Y$年$M$月$D$日）をJDに変換する際、1月と2月は前年の13月、14月として扱う必要がある（$Y = Y - 1, M = M + 12$）。これは、ユリウス暦およびグレゴリオ暦の計算において、閏年の処理を簡潔にするための標準的な手法である4。
グレゴリオ暦（1582年10月15日以降）におけるJDの計算式は以下の通りである。ここで、INTは整数部分を抽出する関数とする。

$$A = \text{INT}\left(\frac{Y}{100}\right)$$

$$B = 2 - A + \text{INT}\left(\frac{A}{4}\right)$$

$$JD = \text{INT}(365.25(Y + 4716)) + \text{INT}(30.6001(M + 1)) + D + B - 1524.5$$

2.1.2. 時間精度の拡張

通常の天文学的用途では正午（12:00 UT）を起点とするが、本システムでは「節入り」の瞬間（分単位）を判定するため、出生時間（$h$時$m$分$s$秒）を含めた浮動小数点数としてのJD計算が不可欠である。

$$JD_{precise} = JD + \frac{h - 12}{24} + \frac{m}{1440} + \frac{s}{86400}$$
この$JD_{precise}$こそが、後の惑星位置計算や二十四節気判定における「マスターキー」となり、個人の運命を決定づける時空間座標の原点となる1。

2.2. 真正太陽時（True Solar Time）の導出

本システムの最大の差別化要因は、時計が示す「平均太陽時（Civil Time）」ではなく、太陽が南中する瞬間を基準とした「真正太陽時（Local Apparent Solar Time）」を採用する点にある。四柱推命や算命学において、時柱の境界（例：亥の刻から子の刻への移行）は、太陽の実際の位置に基づかなければならない6。

2.2.1. 経度補正（Longitude Correction）

標準時（日本標準時JSTであれば東経135度）は、広範な地域を一律の時間で管理するための行政的な便宜に過ぎない。個人の出生地（経度$L_{local}$）における太陽の位置を特定するためには、以下の経度補正が必要となる6。

$$T_{long\_diff} = (L_{local} - L_{standard}) \times 4 \text{ [分]}$$
地球は1度回転するのに4分を要するため、例えば福岡（東経約130度）で生まれた場合、明石（東経135度）基準の時計よりも、太陽の動きは$ (130 - 135) \times 4 = -20 $分遅れていることになる。この20分の差が、時柱の干支を決定的に変化させる要因となる。

2.2.2. 均時差（Equation of Time）の算出

さらに、地球の公転軌道が楕円であること、および地軸が傾いていることにより、太陽の視運動は一定ではない。この平均太陽時とのズレを「均時差（EoT）」と呼び、年間を通じて約-16分から+14分の範囲で変動する10。
均時差を無視した場合、特に時柱の境界付近（例：11:00や13:00前後）生まれの利用者に対し、誤った鑑定結果を提供するリスクがある。高精度の診断を実現するためには、以下の近似式または天文計算ライブラリを用いてEoTを算出する11。
まず、年初からの通日$N$を用いて角度$B$（度数法）を求める。


$$B = \frac{360}{365}(N - 81)$$
次に、EoT（分）を算出する。


$$EoT = 9.87 \sin(2B) - 7.53 \cos(B) - 1.5 \sin(B)$$

2.2.3. 真正太陽時の確定

最終的な出生時間の補正値は以下の通りとなる。

$$T_{true} = T_{clock} + T_{long\_diff} + EoT$$
この$T_{true}$を用いて初めて、正確な「時柱」の干支（例：甲子の刻、乙丑の刻など）を導出することが可能となる。多くのアプリがこのプロセスを省略している現状に対し、本システムは「自然界の真のリズム」を捉えることを是とする13。

2.3. 二十四節気（Setsu-iri）の精密計算と月柱の決定

陰陽五行論において、「月」の変わり目はカレンダー上の1日ではなく、「節入り（せついり）」の瞬間である。例えば、2月の開始（立春）は、太陽黄経が315度ジャストに達した瞬間であり、それは年によって2月3日であったり2月4日であったり、時間も午前であったり午後であったりする14。

2.3.1. VSOP87アルゴリズムの実装

この節入りの瞬間を「分単位」で特定するために、本システムでは簡易的な定数計算ではなく、NASA JPL等が提供する天体暦データや、高精度惑星位置計算アルゴリズム「VSOP87（Variations Séculaires des Orbites Planétaires）」の実装を推奨する16。
Python等の言語で実装する場合、SkyfieldやPyEphemといったライブラリを経由し、JPLのDE421エフェメリス（天体暦）を参照することで、出生時における太陽の視黄経（Apparent Geocentric Ecliptic Longitude, $\lambda$）を算出する。
立春（2月節）: $\lambda = 315^\circ$
啓蟄（3月節）: $\lambda = 345^\circ$
清明（4月節）: $\lambda = 15^\circ$
...（以降、15度刻みで推移）
出生時の太陽黄経が、節入りの角度に達していない場合、その利用者は前月の干支に属することになる。この判定ロジックは、特に節入りの日の前後に生まれた利用者の運勢（月柱）を決定する上で極めて重要である15。

2.4. 「子の刻」の境界問題と日付変更線の処理

陰陽五行論および四柱推命の流派において、最大の論点の一つが「夜23:00〜00:00」の扱い、いわゆる「早子（早生まれの子）」と「遅子（夜子）」の問題である。
本システムでは、ウェブ上の議論と「真髄」とされる論理的整合性を鑑み、以下のロジックを採用する。
日付の境界: あくまで「真正太陽時の00:00」を日付の変更線とする。
時柱の境界: 「真正太陽時の23:00」をもって「子の刻」の開始とする。
したがって、23:00〜23:59に生まれた場合、日柱は当日の干支のままであるが、**時柱は翌日の干支（子の刻）**を適用する、あるいは日柱そのものを翌日として扱う流派が存在するが、本仕様書ではシステムの一貫性を保つため、「時柱は子の刻（翌日の気を先取りする）、日柱は当日」というロジック、もしくはユーザー設定により「23時をもって翌日とする（日付変更説）」を選択可能にする設計を推奨する20。ただし、最も伝統的かつ論理的な整合性が高いのは、23時〜24時を「夜子時（やねのこく）」として当日扱い、0時〜1時を「朝子時（あさねのこく）」として翌日扱いとしつつ、時柱の干支は同じ「子の刻」を使用する方法である。

3. 運命マトリクスエンジン：四柱（BaZi）導出ロジック

天文学的計算によって得られた時空間座標を基に、個人の宿命を表す「命式（四柱）」を構築する。ここでは、六十花甲子（干支）の循環法則に基づく厳密な導出プロセスを定義する。

3.1. 六十花甲子の循環数理

六十花甲子は、十干（10種類）と十二支（12種類）の最小公倍数である60通りの組み合わせから成る。
十干（天干）: 甲(1), 乙(2), 丙(3), 丁(4), 戊(5), 己(6), 庚(7), 辛(8), 壬(9), 癸(10)
十二支（地支）: 子(1), 丑(2), 寅(3), 卯(4), 辰(5), 巳(6), 午(7), 未(8), 申(9), 酉(10), 戌(11), 亥(12)
計算においては、常に (Index - 1) % Modulo + 1 のロジックを用いて1-based indexを維持するか、0-based indexで処理を行い表示時に調整する22。

3.2. 各柱の導出アルゴリズム


3.2.1. 年柱（Year Pillar）の決定

年柱は1月1日ではなく、「立春（2月4日前後）」を基準に切り替わる。
ロジック:
出生日時と、その年の立春日時（VSOP87で計算）を比較する。
出生日時 ＜ 立春日時 の場合、前年の干支を採用する。
年干支インデックス = $(西暦年 - 3) \pmod{60}$ （※紀元前等の対応が必要な場合はJDベースで計算）22。

3.2.2. 月柱（Month Pillar）の決定

月柱は二十四節気（12の節）によって区切られる。
地支（十二支）: 立春からの経過節数によって固定される（2月=寅、3月=卯... 1月=丑）。
天干（十干）: 「年干」に基づく「五虎遁（ごことん）の法」により決定される。
年干が甲・己の場合 $\rightarrow$ 寅月の天干は「丙」（丙寅から開始）
年干が乙・庚の場合 $\rightarrow$ 寅月の天干は「戊」（戊寅から開始）
（以下、丙辛→庚、丁壬→壬、戊癸→甲 と続く）24。

3.2.3. 日柱（Day Pillar）の決定

日柱は運命解析の核（Day Master / 日主）であり、最も重要な要素である。
ロジック: 基準日（例：甲子の日）からの経過日数をJDを用いて算出する。
計算式:
干のインデックス = $(JD - 11) \pmod{10}$
支のインデックス = $(JD + 1) \pmod{12}$
この計算により、グレゴリオ暦の不連続性を超えて、数千年にわたる連続した日の干支を特定できる4。

3.2.4. 時柱（Hour Pillar）の決定

時柱は真正太陽時を用いて決定される。
地支: 1日を2時間ごとに12等分し、23:00-01:00を子刻、01:00-03:00を丑刻...とする。
天干: 「日干」に基づく「五鼠遁（ごそとん）の法」により決定される。
日干が甲・己の場合 $\rightarrow$ 子刻の天干は「甲」（甲子から開始）
日干が乙・庚の場合 $\rightarrow$ 子刻の天干は「丙」（丙子から開始）
（以下、丙辛→戊、丁壬→庚、戊癸→壬 と続く）20。

3.3. 天中殺（Void）の算出ロジック

天中殺（空亡）は、空間（十二支）が存在せず時間（十干）のみが流れる期間を示し、運命の「枠」が外れる特殊な領域である。ドライブ資料および検索結果に基づき、以下の算出ロジックを実装する26。
日干支番号の算出:
日干の数値（1〜10）と日支の数値（1〜12）を取得。
差分の計算:
$X = (\text{日干数値} - \text{日支数値})$
グループの特定:
$X$が正の場合、天中殺グループ番号 = $X$に対応する十二支。
$X$が0または負の場合、天中殺グループ番号 = $X + 12$に対応する十二支。
天中殺グループと欠落する世界（解析ロジック）:
算出値
グループ名
欠落（中殺）する世界
特徴的解釈
戌・亥
戌亥天中殺
中央・家系の世界
現実的な家系・伝統の恩恵を受けにくい。「初代運」を持ち、自力で道を切り開く精神的孤高の実践者。
申・酉
申酉天中殺
西方・家庭/配偶者の世界
安住の地や家庭の安らぎが欠けやすい。多忙な社会活動や仕事に邁進することでバランスを保つ「行動の星」。
午・未
午未天中殺
南方・子供/部下の世界
末代運であり、目下との縁が薄い。知恵と理性で締めくくる役割を持ち、目上や伝統を継承することに吉がある。
辰・巳
辰巳天中殺
天頂・精神の世界
現実世界でのたくましさを持つが、精神的な救いや逃げ場を持たない。「はみ出し運」として独自の現実を創造する。
寅・卯
寅卯天中殺
東方・母親/友人の世界
社会的な前進力や友人・母親との縁が欠けやすい。圧倒的な「後継者運」を持ち、既存の組織や家系を守り拡大する力を持つ。
子・丑
子丑天中殺
北方・父親/目上の世界
目上や父親からの恩恵を受けにくい。「初代運」としてゼロからスタートし、未来（子供や部下）に希望を託す生き方が適する。

このロジックにより、単に「運が悪い時期」としてではなく、「どの方向性のエネルギーが欠如しており、それを補うためにどのような生き方を選択すべきか」という具体的な指針を提示する26。

4. 形而上学的ドメインモデル：「真髄」の実装

天文学的計算によって得られたデータに対し、本システム独自のリサーチ資料（「陰陽五行論.xlsx」「陰陽五行の真髄」等）から抽出された哲学的解釈を適用する。これこそが、本アプリを単なる計算機から「人生の羅針盤」へと昇華させる核心部分である。

4.1. 五行本能論（Instinct Theory）と五徳（Virtues）

リサーチ資料『201701_1_陰陽五行論大阪塾概要について.pdf』30によれば、五行は単なる元素ではなく、人間の生存に不可欠な「本能」と、それを昇華させた「徳」として定義される。システムはこの定義に基づき、ユーザーの命式の五行バランスを以下のパラメータに変換して出力する。
五行
方位
本能（Instinct）
五徳（Virtue）
司る領域・原理
木
東
守備本能 (Defense)
仁 (Benevolence)
自律と安寧。

平和と自己確立の出発点。自他を守り、慈しむ心。この本能が強い者は、平和な環境の維持と構築に才能を発揮する。
火
南
伝達本能 (Communication)
礼 (Propriety)
未来と表現。

情熱や知恵を伝播させ、次世代を育成する力。礼節を守ることで未来が開かれるとされる。芸術や教育の分野。
土
中央
引力本能 (Attraction)
信 (Trust)
現実と統合。

人、物、金を惹きつける磁力。仁義礼智の四徳を備えた時、最大の「信用」として発現する。経済活動や組織の中心。
金
西
攻撃本能 (Attack/Action)
義 (Righteousness)
前進と変革。

目的達成のための闘争心と、正義を貫く決断力。破壊と創造を通じて、組織や社会を前進させる役割。
水
北
習得本能 (Learning)
智 (Wisdom)
過去と知性。

物事の本質を見抜く知恵と、過去から学ぶ力。人生の終わりに備わる品格と理念を司る。

診断ロジックへの統合:
従来のアプリが「あなたは木の要素が強いです」と出力するのに対し、本システムでは以下のようなナラティブを生成する。
「あなたの命式において最も強力なのは『守備本能（木）』です。これは単なる頑固さではなく、周囲の人々や組織を守り抜こうとする『仁』の徳があなたの核であることを示しています。平和な環境で自律的に行動できる時、あなたの能力は最大化されます。」

4.2. 運命の方程式と時代ダイナミクス

資料には、運命を改良するための具体的な「公式」が提示されている30。

$$\text{運命 (Destiny)} = (\text{宿命 (Fate)} + \text{環境 (Environment)}) \times \text{生き方 (Lifestyle)}$$
この公式をシステムに実装するためには、「環境」を変数として定義する必要がある。資料によれば、時代は「陽の時代」と「陰の時代」を繰り返している。
陽の時代（現在）:
特徴：精神重視、平和、多様性、曖昧さ（ファジー）、無駄の許容。
推奨される生き方：効率一辺倒ではなく、精神的な豊かさや遊び心を取り入れること。個人の夢が実現しやすい。
陰の時代:
特徴：現実重視、動乱、善悪の明確化、統制、効率化。
推奨される生き方：現実的な成果を追求し、厳格な規律の中でたくましく生きること。
アルゴリズムへの実装:
システムは現在の日付から「時代のパラメータ」を取得し、ユーザーの宿命との適合度を計算する。
「現在は『陽の時代』にあり、多様性と精神性が重視されています。あなたの宿命は現実的な『金（攻撃本能）』が強いですが、今の時代においては、その鋭さを少し和らげ、周囲との調和や精神的な意義を見出す『生き方』を掛け合わせることで、運命はより大きく開花します。」

5. 高度診断ロジック：星と格法のアルゴリズム

本章では、より詳細な性格分析と運勢判断を行うための「十大主星」「十二大従星」、そして特殊な運勢パターンである「格法」の判定ロジックを詳述する。

5.1. 十大主星（Judai Shusei）のマトリクス解析

十大主星は、日干（自分）と他の干支（対象）との関係性（通変）から導き出される10種類の意識的性格である。システムは以下のマトリクスを用いて、人体星図（陽占）を構築する31。
日干との関係
陰陽
星の名称
本能
特徴的キーワード
比和（同質）
同
貫索星
守備
独立独歩、頑固、マイペース、単独行動
比和（同質）
異
石門星
守備
協調性、政治力、組織作り、社交性
相生（我生）
同
鳳閣星
伝達
自然体、遊び心、おおらか、長寿、食通
相生（我生）
異
調舒星
伝達
繊細、孤独、芸術的感性、反骨精神、完全主義
相剋（我剋）
同
禄存星
引力
回転財、奉仕、愛情、目立ちたがり、人情家
相剋（我剋）
異
司禄星
引力
蓄積財、堅実、家庭的、収集癖、準備
相剋（被剋）
同
車騎星
攻撃
行動力、短気、直情径行、スポーツマン、自己犠牲
相剋（被剋）
異
牽牛星
攻撃
責任感、名誉、自尊心、役人肌、体制側
相生（被生）
同
龍高星
習得
体験学習、放浪、改革、忍耐、創造性
相生（被生）
異
玉堂星
習得
学問的学習、伝統、母性、理屈、正統派

判定ロジック:
システムは、日干と、年干・月干・時干・および各蔵干との組み合わせを総当たりで計算し、人体星図の定位置（頭、胸、腹、左手、右手）に配置する。特に「胸（月支元命）」にある星をその人の本質（Central Identity）として重み付けを行い、解釈テキストを生成する。

5.2. 十二大従星（Junidai Jusei）とエネルギー採点法

十二大従星は、人生の各段階におけるエネルギーの強弱を示す。これは「身強（みきょう）」「身弱（みじゃく）」の判定において決定的役割を果たす31。

5.2.1. エネルギー点数テーブル

星名称
人生段階
エネルギー点数
特徴
天将星
家長・帝王
12
最大エネルギー。強烈な個性とリーダーシップ。苦労が必要。
天禄星
壮年・補佐
11
堅実、慎重、補佐役としての最強の運気。
天南星
青年・成人
10
前進力、批判精神、恐れを知らない行動力。
天貴星
少年・少女
9
自尊心、素直さ、おしゃれ、長男長女の役割。
天印星
赤子
6
無心、愛される徳、受け身、養子運。
天恍星
思春期
7
夢、ロマン、離郷、芸能、華やかさ。
天庫星
墓
5
探究心、凝り性、長男の星、墓守り。
天堂星
老人
8
落ち着き、相談役、隠居、自制心。
天胡星
病人
4
直感、空想、芸術、美意識、身体の弱さ。
天極星
死人
2
霊感、純粋、お人好し、技術者、哲学。
天馳星
あの世
1
瞬発力、多忙、感情の起伏、営業力。
天報星
胎児
3
変転、多芸多才、気分屋、器用貧乏。
(注: 点数は流派により若干の差異があるが、ここでは算命学の標準的な数値を採用)








5.2.2. 身強・身弱判定アルゴリズム

システムは、年支、月支、日支から算出された3つの従星の点数を合計する。


$$\text{Total Energy} = \text{Score}_{Year} + \text{Score}_{Month} + \text{Score}_{Day}$$
合計20点以上: 最身強（身強）。現実社会でのたくましい前進力を持つ。肉体を酷使する環境で運が伸びる。
合計10点〜19点: 身中。バランス型。
合計10点未満: 身弱。精神世界や知的分野に適性がある。過度な競争や肉体労働は避け、精神性を高めることで運が開ける。

5.3. 格法（Kakuho）の判定：従化五格と部分格

「格法」は、特定の条件下でのみ成立する特殊な運勢パターンであり、通常の解釈をオーバーライドする強力な要因となる。リサーチ資料『202002_格法_rev2.0.1k.pdf』33に基づき、以下の厳密な判定ロジックを実装する。

5.3.1. 従化五格（完全格）の判定ロジック

従格（じゅうかく）は、日干が極端に弱く、周囲の勢力に「従う」ことで開運する型である。
共通条件:
命式中に「貫索星」「石門星」（自星）が一切存在しないこと。
日干が根を持たない（地支に同質の五行がない）こと。
極端な身弱であること。
各論判定:
従財格（じゅうざいかく）: 日干が他の全ての干支を「剋す」形（財星一色）。
現象: 莫大な財運。金銭感覚に優れるが、家庭や健康を犠牲にしやすい。
従官・従殺格（じゅうかん・じゅうさつかく）: 日干が他の全ての干支から「剋される」形（官星一色）。
現象: 巨大な名誉運。自己を滅して公（組織・国家）に尽くすことで大成する。
従生格（じゅうしょうかく）: 日干が他の全ての干支を「生じる」形（漏星一色）。
現象: 天才的な表現力と頭脳。芸術や学問で時代を画する。

5.3.2. 部分格（部分的な特殊条件）の判定ロジック

部分格は完全格ほどではないが、特定の才能や運気を付与する。
福徳秀気格（ふくとくしゅうきかく）:
条件：日干が「陰」であり、地支に「巳・酉・丑」の金局（三合会局）が成立していること。
解釈: 運勢の強弱に関わらず、生涯を通じて衣食住に困らない「福運」を持つ。
天干連珠格（てんかんれんじゅかく）:
条件：年干→月干→日干と、五行が相生（生み出す関係）で連続していること（例：甲(木)→丙(火)→戊(土)）。かつ、干合がないこと。
解釈: 災難に遭っても必ず救いの手が差し伸べられる、強運の持ち主。順序正しい人生を歩む。
殺印相生格（さついんそうしょうかく）:
条件：自分を攻める「官・殺（金）」と、自分を生かす「印（水）」が並び、金生水→水生木（自分）の流れができること。
解釈: 素晴らしい名誉と知性を兼ね備え、社会的に高い地位に就く運気。
システムはこれらの条件をブール論理（Boolean Logic）で順次評価し、該当する場合に「あなたは特殊な『〇〇格』の持ち主です」という特別診断セクションを表示する。

5.4. 五行バランスの採点と「欠け」の法則

資料『201909_雑学 五行のバランス.pdf』32には、五行の出現数に基づく興味深い心理分析ロジックが示されている。
バランス計算: 命式の全干支（蔵干含む）を五行に変換し、その数をカウントする（例：木2, 火3, 土1, 金0, 水0）。
「0（欠け）」の法則:
出現数が「0」の五行に対し、人間は無意識かつ強烈な「渇望」を抱く。
水の欠け: 知性への渇望。学歴や知識の収集に執着する傾向。
土の欠け: 財と安定への渇望。金銭や不動産への執着、または極度の不安。
火の欠け: 伝達への渇望。孤独を恐れ、過剰に自分をアピールしようとする。
診断メッセージ:「あなたの命式には『金』の要素がありません。これは、あなたが無意識のうちに『攻撃本能（行動力・結果）』を求め、焦りを感じやすいことを示唆しています。しかし、陰陽五行の真髄は『無いものをねだる』のではなく『有るものを活かす』ことにあります。あなたの豊かな『火（伝達力）』こそが、結果を引き寄せる鍵となるでしょう。」

6. システム実装仕様：データ構造と生成アルゴリズム

以上のロジックを具現化するための、具体的な実装仕様を定義する。

6.1. 推奨技術スタック

言語: Python (データ処理・科学計算に最適)
天文学ライブラリ: Skyfield (NASA JPLのDE421/DE440エフェメリスを使用可能) 16
タイムゾーン処理: pytz および timezonefinder (緯度経度から正確な歴史的タイムゾーンと夏時間を特定するため) 35

6.2. 60干支解釈データベースのスキーマ設計

リサーチ資料『202007...pdf』『202010...pdf』に基づき、60干支それぞれの詳細な解釈データを格納するJSON/RDBスキーマは以下の構造を持つべきである37。

JSON


{
  "ganzhi_id": 41,
  "name_kanji": "甲辰",
  "name_reading": "きのえたつ",
  "element_nature": "陽の木 / 陽の土",
  "interpretation": {
    "personality": {
      "summary": "内剛外柔の精神を持ち、穏やかに見えて確固たる芯を持つ。",
      "keywords": ["理性的", "短気", "自尊心", "反骨精神"],
      "detail": "表面的には人当たりが良いが、内面には激しい闘争心とプライドを秘めている。..."
    },
    "lifestyle": {
      "summary": "初代運を持ち、自らの力で人生を開拓する。",
      "success_pattern": "親元を離れ、独立独歩で道を切り開くことで大成する。",
      "career_suitability": ["実業家", "政治家", "開拓者"],
      "warning": "融通が利かない面があり、敵を作りやすいため、協調性を意識することが課題。"
    }
  },
  "tenchusatsu_group": "寅卯天中殺",
  "special_conditions": ["日座中殺（該当する場合）"]
}



6.3. 診断レポート生成アルゴリズム（疑似コード）


Python


def generate_diagnostic_report(user_profile):
    # 1. 天文学的計算
    jd = calculate_julian_day(user_profile.birth_datetime)
    true_solar_time = calculate_true_solar_time(jd, user_profile.longitude)
    solar_term = get_solar_term_vsop87(jd)
    
    # 2. 命式（四柱）の導出
    bazi = derive_four_pillars(jd, true_solar_time, solar_term)
    
    # 3. 基礎パラメータ計算
    energy_score = calculate_energy_score(bazi) # 身強・身弱
    instinct_balance = calculate_five_elements_balance(bazi) # 五行本能
    tenchusatsu = calculate_tenchusatsu(bazi.day_stem, bazi.day_branch)
    
    # 4. 特殊格法の判定
    special_grids = check_special_grids(bazi) # 従格・部分格
    
    # 5. ナラティブ生成（真髄ロジックの適用）
    report =
    
    # 本能と徳の解釈
    report.append(interpret_instincts(instinct_balance))
    
    # 時代適合度（(宿命+環境)x生き方）
    current_era = get_current_era_dynamics() # 陽/陰の時代
    report.append(interpret_destiny_formula(bazi, current_era))
    
    # 格法によるオーバーライド
    if special_grids:
        report.append(interpret_special_grids(special_grids))
    else:
        report.append(interpret_standard_pattern(bazi, energy_score))
        
    return report



7. 結論

本仕様書にて定義されたシステムは、従来の占いアプリの枠を超え、天文学的「事実」と東洋哲学の「真髄」を融合させた、極めて精度の高いライフ・コンサルティング・エンジンである。
時間座標の正確性: 真正太陽時とVSOP87の実装により、時柱・月柱の誤判定を排除する。
解釈の深さ: 「本能論」「五徳」「運命の方程式」といった独自資料に基づくロジックにより、単なる性格当てではなく、人生の戦略（生き方）を提示する。
個別最適化: 特殊な「格法」や「欠け」の心理分析を実装することで、万人に共通の定型文ではない、その人だけの詳細な分析を提供する。
この設計に基づき開発を行うことで、ユーザーは自らの宿命を正確に理解し、現代という環境の中でいかに生きるべきかという、具体的かつ哲学的な指針を得ることができるだろう。これこそが、陰陽五行論が本来目指していた「帝王学」としての真価である。
引用文献
Converting Between Julian Dates and Gregorian Calendar Dates - US Naval Observatory Astronomical Applications Department, 11月 29, 2025にアクセス、 https://aa.usno.navy.mil/faq/JD_formula
Julian Date Converter - Astronomical Applications Department, 11月 29, 2025にアクセス、 https://aa.usno.navy.mil/data/JulianDate
Julian day - Wikipedia, 11月 29, 2025にアクセス、 https://en.wikipedia.org/wiki/Julian_day
Julian Day Calculations (Gregorian Calendar) - Bill Jefferys, 11月 29, 2025にアクセス、 https://quasar.as.utexas.edu/BillInfo/JulianDatesG.html
Julian and Sexagenary Date Calculator - GitHub Pages, 11月 29, 2025にアクセス、 https://ytliu0.github.io/ChineseCalendar/Julian.html
General Solar Position Calculations First, the fractional year (γ) is calculated, in radians. γ = 2π 365 ∗ (day_of_year −, 11月 29, 2025にアクセス、 https://gml.noaa.gov/grad/solcalc/solareqns.PDF
How To Read A BaZi Chart: The Right & Holistic Way - Sean Chan, 11月 29, 2025にアクセス、 https://www.masterseanchan.com/blog/how-to-read-a-bazi-chart/
Beginner's Guide to Bazi Reading - Imperial Harvest, 11月 29, 2025にアクセス、 https://imperialharvest.com/blog/beginners-guide-to-bazi-reading/
True Solar Time Explained - Ancient Timekeeping in Modern Practice - FateMaster.AI, 11月 29, 2025にアクセス、 https://www.fatemaster.ai/en/guides/true-solar-time
SWS - The Sun and Solar Activity - The Equation of Time - Space Weather, 11月 29, 2025にアクセス、 https://www.sws.bom.gov.au/Educational/2/1/14
Equation of time - Wikipedia, 11月 29, 2025にアクセス、 https://en.wikipedia.org/wiki/Equation_of_time
Calculating the Equation of Time, 11月 29, 2025にアクセス、 https://equation-of-time.info/calculating-the-equation-of-time
The Equation of Time - Astronomical Applications Department, 11月 29, 2025にアクセス、 https://aa.usno.navy.mil/faq/eqtime
二十四節気の略算式, 11月 29, 2025にアクセス、 https://addinbox.sakura.ne.jp/sekki24_topic.htm
二十四節気の節入り日の「1分1秒を争う問題」 - こよみのページ, 11月 29, 2025にアクセス、 https://koyomi8.com/doc/mlwa/201909150.html
solar_terms_24 calculates and collects 24 solar terms by using NASA JPL Horizons API. - GitHub, 11月 29, 2025にアクセス、 https://github.com/kevinluo201/solar_terms_24
gmiller123456/vsop87-multilang: VSOP87 in multiple programming languages - GitHub, 11月 29, 2025にアクセス、 https://github.com/gmiller123456/vsop87-multilang
VSOP87 Multilang - Celestial Programming, 11月 29, 2025にアクセス、 https://celestialprogramming.com/vsop87-multilang/index.html
eacal - PyPI, 11月 29, 2025にアクセス、 https://pypi.org/project/eacal/
Four Pillars Easy Formulas | PDF - Scribd, 11月 29, 2025にアクセス、 https://www.scribd.com/doc/126988363/Four-Pillars-Easy-Formulas
Four Pillars Calculator - Quan Yin Divination, 11月 29, 2025にアクセス、 http://quanyindivination.com/four-pillars-calculator/
Sexagenary cycle - Wikipedia, 11月 29, 2025にアクセス、 https://en.wikipedia.org/wiki/Sexagenary_cycle
Sexagenary Cycle (六十干支) - GitHub Pages, 11月 29, 2025にアクセス、 https://ytliu0.github.io/ChineseCalendar/sexagenary.html
GanZhi BaZi Calendar - Singing Dragon and Handspring Blog, 11月 29, 2025にアクセス、 https://blog.singingdragon.com/wp-content/uploads/2017/10/Pages-26-36-from-Wu-Calculating-the-BaZi-9781848193123.pdf
An Introduction to the Chinese Calendar (Part 2) - Imperial Harvest, 11月 29, 2025にアクセス、 https://imperialharvest.com/blog/introduction-to-the-chinese-calendar-part-2/
201812_因縁と空.pdf, https://drive.google.com/open?id=10giSSMfp44kyUPY3A8QgPVhbP_Asghul
The Japanese Finger Maths – Soroban Explained! Calculate Faster than a calculator. Soroban Part - 1 - YouTube, 11月 29, 2025にアクセス、 https://www.youtube.com/watch?v=pAAC75lheGE
BaZi Knowledge Manual Calculation | PDF | Yin And Yang | Fraction (Mathematics) - Scribd, 11月 29, 2025にアクセス、 https://www.scribd.com/document/246030027/BaZi-Knowledge-Manual-Calculation
天中殺の過ごし方を解説【2025年】運気アップにつながる乗り越え方｜優しい四柱推命, 11月 29, 2025にアクセス、 https://sup.andyou.jp/shicyusuimei/tencyusatsu/tencyusatsu-life/tencyusatsu-2025/
201701_1_陰陽五行論大阪塾概要について.pdf, https://drive.google.com/open?id=1sAg85xamTDS5JcoH_jtCjJSh_tjZXm9l
陰陽五行論.xlsx, https://drive.google.com/open?id=1QMgiJvcViCSEhnvlbGMmbCkjPtEb0PCL
201909_雑学　五行のバランス.pdf, https://drive.google.com/open?id=1cSy5IFE_aqDJ9q6v-xT3pZ_jaln9wTXH
202002_格法_rev2.0.1k.pdf, https://drive.google.com/open?id=1KyaH9UffKfi6mNAHLoPW3yBdStGs3zMz
How to compute solar terms · Issue #273 - GitHub, 11月 29, 2025にアクセス、 https://github.com/skyfielders/python-skyfield/issues/273
time — Time access and conversions — Python 3.14.0 documentation, 11月 29, 2025にアクセス、 https://docs.python.org/3/library/time.html
datetime — Basic date and time types — Python 3.14.0 documentation, 11月 29, 2025にアクセス、 https://docs.python.org/3/library/datetime.html
202007_六十花甲子詳細(01-20)_rev0.0.2.pdf, https://drive.google.com/open?id=1iqP-Sarvfs_yKKtekZXa9mKNn2mxhZKY
202010_六十花甲子詳細(41-60)_rev0.0.3.pdf, https://drive.google.com/open?id=1fYQEOyavL4Gv0Ts73HpQOHqy4t5USIyU
