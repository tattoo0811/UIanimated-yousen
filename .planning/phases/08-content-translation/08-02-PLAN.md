# 08-02: Three Tone Pattern Implementation

**Phase:** 08 - Content Translation
**Plan:** 2 of 2
**Estimated:** 60 minutes
**Wave:** 1 (Parallel)

## Context

Plan 08-01 created the tone selection system structure. This plan implements the actual translation logic for each tone style, transforming professional fortune-telling language into buzz-worthy social media content.

## Success Criteria

1. TikTok tone: Short sentences (2-3), emotional words, punchlines
2. YouTube tone: Storytelling format with intro/body/conclusion
3. Instagram tone: Visual-focused descriptions with emoji usage
4. All 5 content sections (essence/family/work/love/ochi) have tone variations

## Tasks

### Task 1: TikTok Tone Patterns (20 min)

**File:** `backend/src/lib/contentTranslator.ts`

Implement TikTok transformation:

```ts
const tikTokPatterns = {
  essence: (base: string, nickname: string) => {
    // Transform to: 2-3 short sentences + emotional keywords + punchline
    // Example: "ã€${nickname}ã®æœ¬è³ªã€‘\nãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—â— å¤§æœ¨ã®èŠ¯ï¼ğŸŒ³\nã¿ã‚“ãªã‚’æ”¯ãˆã‚‹é ¼ã‚ŠãŒå­˜åœ¨âœ¨\nã‚‚ã†ã€æ°—ã¥ã„ã¦ã‚‹ï¼Ÿãã®é­…åŠ›ï¼"
  },

  family: (base: string) => {
    // Transform to: emotional + specific action + emoji
    // Example: "å®¶æ—é‹â— å›°ã£ãŸã‚‰é ¼ã‚‰ã‚Œã‚‹ï¼\nå®¶åº­ã®æŸ±ã¨ã—ã¦å®ˆã‚‹ğŸ \næ„›ã•ã‚Œã‚‹å½“ãŸã‚Šå‰ã®äººğŸ’•"
  },

  work: (base: string) => {
    // Transform to: strength + opportunity + motivation
    // Example: "ä»•äº‹é‹â— ãƒªãƒ¼ãƒ€ãƒ¼è·ã§è¼ãï¼\nãƒãƒ¼ãƒ ç‡ã„ã¦çµæœå‡ºã™ğŸ’ª\nä»»ã›ã¦ï¼ã£ã¦è¨€ã‚ã‚Œç¶šã‘ã‚‹"
  },

  love: (base: string) => {
    // Transform to: appeal + compatibility + dreamy
    // Example: "æ‹æ„›é‹â— è‡ªç„¶ä½“ã§ãƒ¢ãƒ†ã‚‹ï¼\nãƒªãƒ¼ãƒ‰ã™ã‚‹é–¢ä¿‚ãŒæœ€é«˜ğŸ’•\né‹å‘½ã®äººã€ã‚‚ã†ã™ãä¼šãˆã‚‹ã‹ã‚‚"
  },

  ochi: (base: string) => {
    // Already punchy, just add energy
    // Example: "${nickname}ã€ä»Šæ—¥ã‚‚ãƒªãƒ¼ãƒ‰ã—ã¡ã‚ƒã†ãï¼ğŸ”¥\nå¤§æ¨¹ã®ã‚ˆã†ã«ã©ã£ã—ã‚Šã„ã“ã†ãœï¼"
  }
};
```

**Characteristics:**
- Max 2-3 sentences per section
- Emotional keywords: â—, âœ¨, ğŸ’ª, ğŸ’•, ğŸ”¥
- Direct address: "ã‚ãªãŸ", "ãã¿"
- Question format for engagement
- Half-width katakana for casual feel

### Task 2: YouTube Tone Patterns (20 min)

**File:** `backend/src/lib/contentTranslator.ts`

Implement YouTube transformation:

```ts
const youtubePatterns = {
  essence: (base: string, nickname: string) => {
    // Transform to: storytelling intro â†’ detail â†’ takeaway
    // Example: "ã€${nickname}ã•ã‚“ã®æœ¬è³ªã£ã¦ï¼Ÿã€‘\nå®Ÿã¯ã­ã€${nickname}ã•ã‚“ã«ã¯ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒã‚ã‚‹ã‚“ã ã‚ˆã­ã€‚å¤§æœ¨ã®ã‚ˆã†ã«ã—ã£ã‹ã‚Šã¨ã—ãŸèŠ¯ãŒã‚ã£ã¦ã€å‘¨å›²ã‚’æ”¯ãˆã‚‹åŠ›ãŒã‚ã‚‹ã®ã€‚\nã“ã®å¼·ã•ã€ç”Ÿã‹ã—ã¦ã„ã£ãŸã‚‰çµ¶å¯¾èªã‚ã‚‰ã‚Œã‚‹ã‚ˆ"
  },

  family: (base: string) => {
    // Transform to: context â†’ advice â†’ example
    // Example: "å®¶æ—é‹ã«ã¤ã„ã¦è©±ãã†ã‹ãª\n${nickname}ã•ã‚“ã¯å®¶åº­ã®æŸ±ã«ãªã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã€‚è²¬ä»»æ„ŸãŒã‚ã£ã¦ã€å®‰å®šã—ãŸç’°å¢ƒã‚’ä½œã‚Œã‚‹ã‚“ã ã‚ˆã­\nå®Ÿéš›ã«ã€å®¶æ—ã‚’ã¾ã¨ã‚ã¦ã¿ã¦ã‚ˆã€‚ãã£ã¨é ¼ã‚Šã«ã•ã‚Œã‚‹ã¯ãš"
  },

  work: (base: string) => {
    // Transform to: hook â†’ explanation â†’ opportunity
    // Example: "ä»•äº‹ã§æ´»ãã‚‹ã£ã¦çŸ¥ã£ã¦ãŸï¼Ÿ\nãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®ã§ãã‚‹ä»•äº‹ãŒå‘ã„ã¦ã‚‹ã‚“ã ã€‚å¤§æœ¨ã®ã‚ˆã†ã«å ‚ã€…ã¨æ§‹ãˆã‚‰ã‚Œã‚‹ã®ãŒå¼·ã¿\nãƒãƒ¼ãƒ ã‚’ç‡ã„ã‚‹å½¹å‰²ã§ä¸€ç•ªè¼ã‘ã‚‹ã‚ˆ"
  },

  love: (base: string) => {
    // Transform to: empathy â†’ analysis â†’ advice
    // Example: "æ‹æ„›è¦³ã€èã‹ã›ã¦ãã‚ŒãŸã‚‰ãª\nå ‚ã€…ã¨ã—ãŸå§¿å‹¢ã§è‡ªç„¶ä½“ã§æ¥ã™ã‚‹ç›¸æ‰‹ãŒç›¸æ€§è‰¯ã„ã¿ãŸã„ã€‚ãƒªãƒ¼ãƒ‰ã™ã‚‹é–¢ä¿‚ã‚’å¥½ã‚€ã‚“ã ã‚ˆã­\nç´ ç›´ã«è‡ªåˆ†ã‚‰ã—ãæŒ¯ã‚‹èˆã£ãŸã‚‰ã€é‹æ°—ä¸ŠãŒã‚‹ã‹ã‚‚"
  },

  ochi: (base: string) => {
    // Transform to: friendly closing + question
    // Example: "${nickname}ã•ã‚“ã€ä»Šæ—¥ã‚‚ãƒªãƒ¼ãƒ‰ã—ã¡ã‚ƒãŠã†ï¼\nå¤§æ¨¹ã®ã‚ˆã†ã«ã©ã£ã—ã‚Šè¡Œã“ã†ãœï¼\nå¿œæ´ã—ã¦ã‚‹ã‹ã‚‰ã­ï¼"
  }
};
```

**Characteristics:**
- Conversational: "ã€œã ã‚ˆã­", "ã€œã¦ã¿ã¦ã‚ˆ"
- Storytelling flow with connective phrases
- Intro phrase: "ã€œã£ã¦çŸ¥ã£ã¦ãŸï¼Ÿ", "ã€œã«ã¤ã„ã¦è©±ãã†"
- Soft endings: "ã€œã‹ã‚‚", "ã€œã§ãã‚‹ã¯ãš"
- Longer than TikTok but still concise

### Task 3: Instagram Tone Patterns (20 min)

**File:** `backend/src/lib/contentTranslator.ts`

Implement Instagram transformation:

```ts
const instagramPatterns = {
  essence: (base: string, nickname: string) => {
    // Transform to: visual description + aesthetic + emoji
    // Example: "ã€${nickname}ã®æœ¬è³ªã€‘ğŸŒ¿\nãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨ã„ã†å¤§æ¨¹ ğŸŒ³\nã—ã£ã‹ã‚Šã¨ã—ãŸèŠ¯ã§ã€å‘¨å›²ã‚’æ”¯ãˆã‚‹å­˜åœ¨æ„Ÿ\nã‚ãªãŸã®ä½‡ã¾ã„ãŒã€èª°ã‹ã‚’æ•‘ã†âœ¨\n#æœ¬è³ª #ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ— #é‹å‘½"
  },

  family: (base: string) => {
    // Transform to: scene description + feeling + emoji
    // Example: "ã€å®¶æ—é‹ã€‘ğŸ¡\nå®¶åº­ã®æŸ±ã¨ã—ã¦ã®å®‰å®šæ„Ÿ\nè²¬ä»»æ„Ÿã‚ã‚‹å§¿å‹¢ãŒã€å®¶æ—ã‚’å®ˆã‚‹\næ¸©ã‹ã„çµ†ã‚’è‚²ã‚€æ¯æ—¥ ğŸ•¯ï¸\n#å®¶æ— #å®¶æ™‚é–“ #å¹¸ã›"
  },

  work: (base: string) => {
    // Transform to: career vision + aesthetic + emoji
    // Example: "ã€ä»•äº‹é‹ã€‘ğŸ’¼\nãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦è¼ãç¬é–“\nå ‚ã€…ã¨ã—ãŸæ§‹ãˆãŒã€ãƒãƒ¼ãƒ ã‚’å‹•ã‹ã™\nä¿¡é ¼ã•ã‚Œã‚‹å­˜åœ¨ã¸ã®é“ ğŸ“ˆ\n#ä»•äº‹ #ã‚­ãƒ£ãƒªã‚¢ #ã‚„ã‚ŠãŸã„ã“ã¨"
  },

  love: (base: string) => {
    // Transform to: romantic scene + emotion + emoji
    // Example: "ã€æ‹æ„›é‹ã€‘ğŸ’•\nè‡ªç„¶ä½“ã§ç¹‹ãŒã‚‹é–¢ä¿‚\nãƒªãƒ¼ãƒ‰ã™ã‚‹æ„›ã®å½¢ãŒä¼¼åˆã†\né‹å‘½ã¨ã®å‡ºä¼šã„ã€ã‚‚ã†ã™ã ğŸŒ¸\n#æ‹æ„› #æ„› #é‹å‘½ã®äºº"
  },

  ochi: (base: string) => {
    // Transform to: casual + hashtag
    // Example: "${nickname}ã€ä»Šæ—¥ã‚‚ãƒªãƒ¼ãƒ‰ã—ã¡ã‚ƒã†ãï¼\nå¤§æ¨¹ã®ã‚ˆã†ã«ã©ã£ã—ã‚Šè¡Œã“ã†ï¼\n#ä»Šæ—¥ã‚‚é ‘å¼µã‚‹ #ã‚„ã‚‹æ°—"
  }
};
```

**Characteristics:**
- Line breaks for visual appeal
- Emoji for each line (ğŸŒ¿, ğŸ¡, ğŸ’¼, ğŸ’•, âœ¨)
- Aesthetic/vocabulary: "ä½‡ã¾ã„", "ç¬é–“", "ç¹‹ãŒã‚‹"
- Hashtags: #æœ¬è³ª, #å®¶æ—, #ä»•äº‹, #æ‹æ„›
- Scene-focused descriptions

### Task 4: Integration Testing (10 min)

**Files:** Multiple

Update all content generators in `backend/src/lib/contentGenerator.ts`:

```ts
import { translateToTone } from './contentTranslator';

export const generateEssenceContent = (
  insen: SanmeigakuInsenChart,
  nickname: string,
  tone: ContentTone
): ContentSection => {
  const dayStem = insen.pillars.day.stem;
  const baseContent = essenceMap[dayStem];

  // Apply tone translation
  const translatedContent = translateToTone(baseContent, {
    tone,
    section: 'essence',
    nickname
  });

  return {
    title: `ã€${nickname}ã®æœ¬è³ªã€‘`,
    content: translatedContent,
    duration: 120
  };
};
```

**Test with:**
- All 10 day stems (ç”²-ç™¸)
- All 3 tones
- All 5 sections
- Verify content length fits video duration

## Dependencies

- Plan 08-01 (Tone Selection System) - must complete first
- Existing contentGenerator structure
- Video content timing from Phase 5

## Testing Checklist

- [ ] TikTok: Max 2-3 sentences per section
- [ ] TikTok: Emotional keywords present (â—, âœ¨, etc.)
- [ ] YouTube: Conversational flow (~ã¦ã¿ã¦ã‚ˆ, ã€œã ã‚ˆã­)
- [ ] YouTube: Storytelling structure (hookâ†’bodyâ†’conclusion)
- [ ] Instagram: Line breaks for visual appeal
- [ ] Instagram: Emoji on each line
- [ ] Instagram: Hashtags present
- [ ] All tones work with all 10 day stems
- [ ] Video duration matches content length
- [ ] No profanity or inappropriate language

## Rollback Plan

If translation causes issues:
1. Keep tone parameter in API
2. Fallback to original contentGenerator (no translation)
3. Log which tone failed for debugging

## Notes

- Tone transformation is rule-based (not AI) for consistency
- Patterns based on successful viral content analysis
- May need iteration after user testing
- Consider A/B testing different patterns
- Japanese cultural context critical for "buzz-worthy"
