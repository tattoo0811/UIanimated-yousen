---
phase: 01-overview-stats
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/data/overview.ts
  - src/components/features/OverviewStats.tsx
  - src/app/dashboard/page.tsx
autonomous: true

must_haves:
  truths:
    - "ユーザーは120話の基本統計（総エピソード数、物語期間、ライフイベントカバレッジ、メインキャラクター数）を一目で確認できる"
    - "データは正典(DASHBOARD.md)から正確に変換されている"
    - "既存の概要タブ内に統計カードが表示されている"
    - "統計値はホバー時に詳細説明を表示する"
  artifacts:
    - path: "src/data/overview.ts"
      provides: "全体統計データ構造"
      exports: ["OVERVIEW_STATS", "OVERVIEW_STATS_TYPE"]
    - path: "src/components/features/OverviewStats.tsx"
      provides: "統計表示カードコンポーネント"
      min_lines: 80
    - path: "src/app/dashboard/page.tsx"
      contains: "OverviewStatsコンポーネントのインポートと使用"
  key_links:
    - from: "src/components/features/OverviewStats.tsx"
      to: "src/data/overview.ts"
      via: "import { OVERVIEW_STATS }"
      pattern: "import.*OVERVIEW_STATS"
    - from: "src/app/dashboard/page.tsx"
      to: "src/components/features/OverviewStats.tsx"
      via: "JSXレンダリング"
      pattern: "<OverviewStats"
---

<objective>
全体統計データ構造を作成し、ダッシュボードの概要タブに表示する。

Purpose: ユーザーが120話全体の基本統計を一目で確認できるようにする
Output: src/data/overview.ts（新規）、src/components/features/OverviewStats.tsx（新規）、src/app/dashboard/page.tsx（変更）
</objective>

<execution_context>
@/Users/kitamuratatsuhiko/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kitamuratatsuhiko/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/STATE.md
@/Users/kitamuratatsuhiko/UIanimated/src/app/dashboard/page.tsx
@/Users/kitamuratatsuhiko/UIanimated/src/data/characters.ts
@/Users/kitamuratatsuhiko/UIanimated/novel/dashboards/DASHBOARD.md

# データソース
正典: novel/dashboards/DASHBOARD.md > 📊 全体統計セクション
</context>

<tasks>

<task type="auto">
  <name>Create overview statistics data structure</name>
  <files>src/data/overview.ts</files>
  <action>
新規ファイル src/data/overview.ts を作成し、全体統計データ構造を定義する。

1. 以下の型定義を作成：
```typescript
export interface OverviewStats {
  totalEpisodes: number;
  storyPeriod: string;
  lifeEventCoverage: {
    implemented: number;
    total: number;
    percentage: number;
  };
  mainCharacters: number;
  totalCharacters: number;
  themes: number;
  subthemes: number;
}
```

2. 正典データ(DASHBOARD.mdの📊全体統計セクション)から値を抽出して定数をエクスポート：
```typescript
export const OVERVIEW_STATS: OverviewStats = {
  totalEpisodes: 120,
  storyPeriod: '1年9ヶ月（2026年4月〜2027年12月）',
  lifeEventCoverage: {
    implemented: 40,
    total: 48,
    percentage: 83.3
  },
  mainCharacters: 4, // 巡、慧、美咲、さくら
  totalCharacters: 110, // メイン4キャラ + 患者107名
  themes: 48, // 算命学テーマ数
  subthemes: 142 // サブテーマ数
};
```

3. 統計説明用の補助データもエクスポート：
```typescript
export const STATS_DESCRIPTIONS = {
  totalEpisodes: '全120話のエピソード数',
  storyPeriod: '物語の開始から終了までの期間',
  lifeEventCoverage: '48件のライフイベントのうち実装された割合',
  mainCharacters: '主要キャラクター数（巡、慧、美咲、さくら）',
  totalCharacters: 'メインキャラクター＋全患者数',
  themes: '算命学テーマ（十干×5 ＋ 陰陽論 ＋ その他）',
  subthemes: 'サブテーマの総数'
};
```

重要: 既存のcharacters.tsやepisodes.tsのパターン（型定義＋定数エクスポート＋ヘルパー関数）に従うこと。
  </action>
  <verify>
1. ファイルが存在する: ls -la src/data/overview.ts
2. TypeScript型チェックが通る: npx tsc --noEmit
3. 定数をconsole.logで出力して値を確認
  </verify>
  <done>
src/data/overview.tsが作成され、OVERVIEW_STATS定数が正典データ（120話、1年9ヶ月、40/48カバレッジ等）を正確に含んでいる
  </done>
</task>

<task type="auto">
  <name>Create OverviewStats component with responsive card layout</name>
  <files>src/components/features/OverviewStats.tsx</files>
  <action>
新規コンポーネント src/components/features/OverviewStats.tsx を作成する。

1. コンポーネント構造（propsでviewModeを受け取る）：
```typescript
interface OverviewStatsProps {
  viewMode: 'simple' | 'detailed';
}

export function OverviewStats({ viewMode }: OverviewStatsProps) {
  // Framer Motionでカードのアニメーション
  // 6つの統計カードをグリッドレイアウトで表示
}
```

2. 6つの統計カードを定義（正典データに対応）：
   - 総エピソード数: 120話
   - 物語期間: 1年9ヶ月
   - ライフイベント: 40/48（83.3%）
   - メインキャラクター: 4名
   - 全キャラクター: 110名
   - 算命学テーマ: 48テーマ

3. 既存の概要タブの統計サマリー（dashboard/page.tsxの182-203行目）を置き換え：
   - 現在の4項目（全エピソード、キャラクター、ターニングポイント、テーマ）を6項目に拡張
   - 既存のグリッドレイアウトパターン（grid grid-cols-2 sm:grid-cols-4）を維持
   - カードスタイル: bg-slate-800/30 rounded-xl p-4
   - ホバー時のインタラクション（既存パターンに合わせる）

4. 各カードには：
   - メイン数値（text-2xl font-bold）
   - ラベル（text-xs text-slate-400）
   - 詳細モード時は追加説明（text-[10px] text-slate-500）
   - Framer MotionのfadeInアニメーション（既存の概要タブのパターンを使用）

5. ルクスアイコン(lucide-react)を適切に使用：
   - DatabaseやFileTextなど、各統計に適切なアイコン
   - 既存のdashboard/page.tsxで使用されているアイコンパターンを参照

重要: CharacterCardやStoryTimelineのスタイルパターン（bg-slate-800/30、border、rounded-xl）に従うこと。
  </action>
  <verify>
1. コンポーネントが正常にインポートできる: grep -r "OverviewStats" src/app/dashboard/page.tsx
2. ランダムに3つのカードを選び、表示値が正典データと一致することを確認
3. レスポンシブデザイン: smブレークポイントでグリッドが2列→4列に変化することを確認
  </verify>
  <done>
OverviewStatsコンポーネントが作成され、6つの統計カードを表示し、viewMode propsに応じて詳細/シンプル表示を切替えられる
  </done>
</task>

<task type="auto">
  <name>Integrate OverviewStats into dashboard overview tab</name>
  <files>src/app/dashboard/page.tsx</files>
  <action>
src/app/dashboard/page.tsxを更新し、OverviewStatsコンポーネントを統合する。

1. インポートを追加（ファイル先頭、他のインポートとまとめて）：
```typescript
import { OverviewStats } from '@/components/features/OverviewStats';
import { OVERVIEW_STATS } from '@/data/overview';
```

2. OverviewTab関数内の統計サマリー部分（182-203行目）を置き換え：
   - 既存の静的な統計配列（全エピソード、キャラクター、ターニングポイント、テーマ）を削除
   - <OverviewStats viewMode={viewMode} /> を追加
   - 前後のベネフィットカードやCTAセクションは維持

3. 構造の維持：
   - ヒーローセクション（"あなたの運命を知る旅に..."）は変更なし
   - ベネフィットカード3枚（算命学を学べる、キャラクターと共に成長、自分の運命を知る）は変更なし
   - CTAセクション（キャラクターを見る、算命学アプリを試す）は変更なし
   - 新しいOverviewStatsはベネフィットカードとCTAの間に表示されるように配置

4. 既存のOverviewTab関数の構造を維持：
   - motion.sectionやmotion.divのアニメーションパターンを維持
   - classNameのスタイルパターン（space-y-8、text-center等）を維持

変更前後で既存の概要タブの機能と見た目が維持されていることを確認すること。
  </action>
  <verify>
1. ダッシュボードページを開き、概要タブが表示されることを確認
2. 6つの統計カードが正しく表示されていることを確認
3. viewMode切替ボタンで詳細モードに変更した時、追加情報が表示されることを確認
4. TypeScriptエラーがないこと: npx tsc --noEmit
  </verify>
  <done>
概要タブにOverviewStatsコンポーネントが統合され、ユーザーは120話全体の基本統計（総エピソード数、物語期間、ライフイベントカバレッジ、メインキャラクター数等）を一目で確認できる
  </done>
</task>

</tasks>

<verification>
After completing all tasks, verify the following:

1. **Data Accuracy**: src/data/overview.tsの値が正典(DASHBOARD.md)と一致している
   - 総エピソード数: 120
   - 物語期間: 1年9ヶ月（2026年4月〜2027年12月）
   - ライフイベント: 40/48（83.3%）
   - メインキャラクター: 4名
   - 全キャラクター: 110名

2. **Component Display**: OverviewStatsコンポーネントが6つのカードを正しく表示
   - カードごとにアイコン、数値、ラベルがある
   - 詳細モードで追加説明が表示される
   - レスポンシブに動作（モバイルで1-2列、デスクトップで3-4列）

3. **Integration**: 概要タブに統合され、既存コンテンツ（ヒーロー、ベネフィット、CTA）と調和している

4. **Type Safety**: TypeScript型エラーなし

5. **Animation**: Framer Motionによるフェードインアニメーションが動作している
</verification>

<success_criteria>
1. ユーザーは120話の基本統計（総エピソード数、物語期間、ライフイベントカバレッジ、メインキャラクター数）を一目で確認できる
2. データは正典(DASHBOARD.md)から正確に取得されている
3. 既存の概要タブのレイアウトとデザインの一貫性が維持されている
4. レスポンシブデザインでモバイルとデスクトップ両対応している
5. 詳細モード切替で追加情報が表示される
</success_criteria>

<output>
After completion, create `.planning/phases/01-overview-stats/01-01-SUMMARY.md` with:
- Implementation details (data structure created, component built)
- Design decisions made (why 6 cards, why specific layout)
- Any deviations from plan
- Next steps (ready for 01-02)
</output>
